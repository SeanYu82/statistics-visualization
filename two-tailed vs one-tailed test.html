<!DOCTYPE html>
<html lang="ko">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ì–‘ì¸¡ê²€ì • vs ë‹¨ì¸¡ê²€ì • ë¹„êµ ì‹œë®¬ë ˆì´í„°</title>
    <style>
        :root {
            --primary: #4f46e5;
            --secondary: #64748b;
            --danger: #ef4444;
            /* ê¸°ê°ì—­ ìƒ‰ìƒ */
            --safe: #3b82f6;
            /* ì±„íƒì—­ ìƒ‰ìƒ */
            --bg: #f8fafc;
            --card-bg: #ffffff;
        }

        body {
            font-family: 'Pretendard', -apple-system, BlinkMacSystemFont, system-ui, Roboto, sans-serif;
            line-height: 1.6;
            background-color: var(--bg);
            color: #1e293b;
            margin: 0;
            padding: 20px;
        }

        .container {
            max-width: 900px;
            margin: 0 auto;
        }

        h1 {
            text-align: center;
            margin-bottom: 10px;
        }

        .subtitle {
            text-align: center;
            color: var(--secondary);
            margin-bottom: 30px;
        }

        .card {
            background: var(--card-bg);
            border-radius: 12px;
            padding: 24px;
            margin-bottom: 25px;
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1);
        }

        .nav-tabs {
            display: flex;
            gap: 10px;
            margin-bottom: 20px;
            justify-content: center;
        }

        .nav-btn {
            padding: 12px 24px;
            border: 2px solid #e2e8f0;
            background: white;
            border-radius: 8px;
            cursor: pointer;
            font-weight: bold;
            font-size: 1rem;
            transition: all 0.2s;
            flex: 1;
            max-width: 200px;
        }

        .nav-btn.active {
            background: var(--primary);
            color: white;
            border-color: var(--primary);
        }

        .nav-btn:hover:not(.active) {
            background: #f1f5f9;
        }

        canvas {
            width: 100%;
            height: 350px;
            background: #f8fafc;
            border-radius: 8px;
            border: 1px solid #e2e8f0;
        }

        .controls {
            margin-top: 20px;
            padding: 15px;
            background: #f1f5f9;
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: space-between;
        }

        input[type=range] {
            width: 200px;
            cursor: pointer;
        }

        .explanation-box {
            background: #eff6ff;
            border-left: 5px solid var(--primary);
            padding: 15px;
            margin-top: 15px;
        }

        .hypothesis-display {
            font-family: 'Courier New', monospace;
            font-weight: bold;
            font-size: 1.1rem;
            background: #1e293b;
            color: #fbbf24;
            padding: 15px;
            border-radius: 6px;
            margin-bottom: 15px;
            text-align: center;
        }

        .pro-tip {
            background: #fff1f2;
            border: 1px solid #fecdd3;
            border-radius: 8px;
            padding: 15px;
            margin-top: 10px;
        }

        .pro-tip h4 {
            margin: 0 0 5px 0;
            color: #9f1239;
        }

        .legend {
            display: flex;
            justify-content: center;
            gap: 20px;
            margin-top: 10px;
            font-size: 0.9rem;
        }

        .dot {
            width: 12px;
            height: 12px;
            display: inline-block;
            border-radius: 50%;
            margin-right: 5px;
        }
    </style>
</head>

<body>

    <div class="container">
        <h1>âš–ï¸ ì–‘ì¸¡ê²€ì • vs ë‹¨ì¸¡ê²€ì • ì‹œê°í™”</h1>
        <p class="subtitle">"ê¸°ê°ì—­(Rejection Region)ì„ ì–´ë””ì— ë°°ì¹˜í•  ê²ƒì¸ê°€?"</p>

        <div class="card">
            <div class="nav-tabs">
                <button class="nav-btn active" onclick="setMode('two')">ì–‘ì¸¡ê²€ì • (â‰ )</button>
                <button class="nav-btn" onclick="setMode('right')">ë‹¨ì¸¡ê²€ì • - ìš°ì¸¡ (>)</button>
                <button class="nav-btn" onclick="setMode('left')">ë‹¨ì¸¡ê²€ì • - ì¢Œì¸¡ (<)< /button>
            </div>

            <div class="hypothesis-display" id="hypothesis-text">
                Hâ‚€: Î¼ = Î¼â‚€ vs Hâ‚: Î¼ â‰  Î¼â‚€
            </div>

            <canvas id="chartCanvas"></canvas>

            <div class="legend">
                <span><span class="dot" style="background:var(--safe)"></span>ì±„íƒì—­ (ì°¨ì´ ì—†ìŒ)</span>
                <span><span class="dot" style="background:var(--danger)"></span>ê¸°ê°ì—­ (ìœ ì˜ë¯¸í•œ ì°¨ì´, Î±)</span>
            </div>

            <div class="controls">
                <label style="font-weight:bold;">ìœ ì˜ìˆ˜ì¤€ (Î±): <span id="alpha-val">0.05</span> (5%)</label>
                <input type="range" id="alpha-slider" min="0.01" max="0.20" step="0.01" value="0.05">
            </div>
        </div>

        <div class="card">
            <h2 id="scenario-title">ë¶„ì„ ì‹œë‚˜ë¦¬ì˜¤ ë° í•´ì„¤</h2>
            <div class="explanation-box" id="scenario-desc">
                <strong>ì–‘ì¸¡ê²€ì • (Two-sided Test):</strong><br>
                ë°©í–¥ì„ ëª¨ë¥´ê±°ë‚˜ ìƒê´€ì—†ì„ ë•Œ ì‚¬ìš©í•©ë‹ˆë‹¤.<br>
                ì˜ˆ: "ë‚¨ì ë†êµ¬ì„ ìˆ˜ í‚¤ê°€ ì¼ë°˜ì¸ê³¼ <strong>ë‹¤ë¥¸ê°€?</strong> (í¬ê±°ë‚˜ ì‘ê±°ë‚˜)"
            </div>

            <div class="pro-tip">
                <h4>ğŸ‘¨â€ğŸ« ê°•ì‚¬ë‹˜ì˜ One Point Lesson</h4>
                <p id="instructor-note">
                    <strong>ê¸°ê°ì—­ì´ ì–‘ìª½ìœ¼ë¡œ ìª¼ê°œì§‘ë‹ˆë‹¤!</strong><br>
                    Î±=0.05ë¼ë©´, ì–‘ìª½ ëì— ê°ê° 0.025(2.5%)ì”© ë‚˜ëˆ„ì–´ ê°€ì§‘ë‹ˆë‹¤.<br>
                    ì–‘ìª½ ì–´ë””ë¡œë“  ê·¹ë‹¨ì ì¸ ê°’ì´ ë‚˜ì˜¤ë©´ ê¸°ê°í•˜ì§€ë§Œ, í•œìª½ ë°©í–¥ìœ¼ë¡œë§Œ ë´¤ì„ ë•Œì˜ ê¸°ì¤€(ì„ê³„ê°’)ì€ ë‹¨ì¸¡ê²€ì •ë³´ë‹¤ ë” ì—„ê²©í•©ë‹ˆë‹¤(ë” ë©€ë¦¬ ë‚˜ê°€ì•¼ í•¨).
                </p>
            </div>
        </div>
    </div>

    <script>
        // --- ìˆ˜í•™ í•¨ìˆ˜ ---
        function gaussian(x) {
            return (1 / Math.sqrt(2 * Math.PI)) * Math.exp(-0.5 * x * x);
        }

        // ì—­ì •ê·œë¶„í¬ í•¨ìˆ˜ (í™•ë¥  pë¥¼ ì£¼ë©´ í•´ë‹¹ Zê°’ì„ ë°˜í™˜) - ê·¼ì‚¬ì¹˜ ê³„ì‚° (Binary Search)
        function getZFromP(p) {
            let min = -6, max = 6, mid = 0;
            for (let i = 0; i < 50; i++) {
                mid = (min + max) / 2;
                if (standardNormalCDF(mid) < p) min = mid;
                else max = mid;
            }
            return mid;
        }

        function standardNormalCDF(x) {
            const t = 1 / (1 + 0.2316419 * Math.abs(x));
            const d = 0.3989423 * Math.exp(-x * x / 2);
            let prob = d * t * (0.3193815 + t * (-0.3565638 + t * (1.781478 + t * (-1.821256 + t * 1.330274))));
            if (x > 0) prob = 1 - prob;
            return prob;
        }

        // --- ìƒíƒœ ë³€ìˆ˜ ---
        let currentMode = 'two'; // 'two', 'right', 'left'
        let alpha = 0.05;
        const canvas = document.getElementById('chartCanvas');
        const ctx = canvas.getContext('2d');
        const slider = document.getElementById('alpha-slider');
        const alphaDisplay = document.getElementById('alpha-val');

        // --- ê·¸ë¦¬ê¸° ë¡œì§ ---
        function draw() {
            // ìº”ë²„ìŠ¤ ì´ˆê¸°í™”
            canvas.width = canvas.offsetWidth;
            canvas.height = canvas.offsetHeight;
            const w = canvas.width;
            const h = canvas.height;
            const padding = 40;

            ctx.clearRect(0, 0, w, h);

            // ì¢Œí‘œ ë§¤í•‘ (-4 ~ 4)
            const mapX = (z) => (z + 4) / 8 * w;
            const mapY = (y) => h - padding - (y * (h - padding * 2) * 2.2); // 2.2ëŠ” ë†’ì´ ì¡°ì ˆìš©

            // 1. ì„ê³„ê°’(Critical Value) ê³„ì‚°
            let zCritLeft = null;
            let zCritRight = null;

            if (currentMode === 'two') {
                // ì–‘ì¸¡: alphaë¥¼ ì ˆë°˜ì”© ë‚˜ëˆ”
                zCritLeft = getZFromP(alpha / 2);      // ì˜ˆ: 0.025 ì§€ì  (-1.96)
                zCritRight = getZFromP(1 - alpha / 2); // ì˜ˆ: 0.975 ì§€ì  (+1.96)
            } else if (currentMode === 'right') {
                // ìš°ì¸¡ ë‹¨ì¸¡: ì˜¤ë¥¸ìª½ ëì— alpha ëª°ë¹µ
                zCritRight = getZFromP(1 - alpha);     // ì˜ˆ: 0.95 ì§€ì  (+1.645)
            } else {
                // ì¢Œì¸¡ ë‹¨ì¸¡: ì™¼ìª½ ëì— alpha ëª°ë¹µ
                zCritLeft = getZFromP(alpha);          // ì˜ˆ: 0.05 ì§€ì  (-1.645)
            }

            // 2. ê·¸ë˜í”„ ê·¸ë¦¬ê¸°
            ctx.lineWidth = 2;

            // ì „ì²´ ê³¡ì„  ê²½ë¡œ ìƒì„±
            let points = [];
            for (let z = -4; z <= 4; z += 0.05) {
                points.push({ x: mapX(z), y: mapY(gaussian(z)), z: z });
            }

            // ê¸°ê°ì—­ ì±„ìš°ê¸° (ë¶‰ì€ìƒ‰)
            ctx.fillStyle = 'rgba(239, 68, 68, 0.4)'; // --danger color transparent

            // ì™¼ìª½ ê¸°ê°ì—­
            if (zCritLeft !== null) {
                ctx.beginPath();
                ctx.moveTo(mapX(-4), mapY(0));
                for (let p of points) {
                    if (p.z <= zCritLeft) ctx.lineTo(p.x, p.y);
                }
                ctx.lineTo(mapX(zCritLeft), mapY(0));
                ctx.fill();
            }

            // ì˜¤ë¥¸ìª½ ê¸°ê°ì—­
            if (zCritRight !== null) {
                ctx.beginPath();
                ctx.moveTo(mapX(zCritRight), mapY(0));
                for (let p of points) {
                    if (p.z >= zCritRight) ctx.lineTo(p.x, p.y);
                }
                ctx.lineTo(mapX(4), mapY(0));
                ctx.fill();
            }

            // ê³¡ì„  ì™¸ê³½ì„  ê·¸ë¦¬ê¸°
            ctx.beginPath();
            ctx.strokeStyle = '#333';
            points.forEach((p, i) => {
                if (i === 0) ctx.moveTo(p.x, p.y);
                else ctx.lineTo(p.x, p.y);
            });
            ctx.stroke();

            // Xì¶•
            ctx.beginPath();
            ctx.moveTo(0, mapY(0));
            ctx.lineTo(w, mapY(0));
            ctx.strokeStyle = '#64748b';
            ctx.lineWidth = 1;
            ctx.stroke();

            // 3. í…ìŠ¤íŠ¸ ë° ë¼ë²¨ í‘œì‹œ
            ctx.textAlign = 'center';
            ctx.font = '14px sans-serif';
            ctx.fillStyle = '#1e293b';

            // ì„ê³„ê°’ í…ìŠ¤íŠ¸ í‘œì‹œ
            ctx.fillStyle = '#ef4444';
            ctx.font = 'bold 14px sans-serif';

            if (zCritLeft !== null) {
                let x = mapX(zCritLeft);
                ctx.beginPath(); ctx.moveTo(x, mapY(0)); ctx.lineTo(x, mapY(gaussian(zCritLeft)));
                ctx.strokeStyle = '#ef4444'; ctx.setLineDash([4, 4]); ctx.stroke(); ctx.setLineDash([]);
                ctx.fillText(`Z = ${zCritLeft.toFixed(2)}`, x, mapY(0) + 20);

                // ë©´ì  í‘œì‹œ
                let area = (currentMode === 'two') ? alpha / 2 : alpha;
                ctx.fillText(`Î± = ${(area * 100).toFixed(1)}%`, mapX(-3.5), mapY(0.1));
            }

            if (zCritRight !== null) {
                let x = mapX(zCritRight);
                ctx.beginPath(); ctx.moveTo(x, mapY(0)); ctx.lineTo(x, mapY(gaussian(zCritRight)));
                ctx.strokeStyle = '#ef4444'; ctx.setLineDash([4, 4]); ctx.stroke(); ctx.setLineDash([]);
                ctx.fillText(`Z = ${zCritRight.toFixed(2)}`, x, mapY(0) + 20);

                // ë©´ì  í‘œì‹œ
                let area = (currentMode === 'two') ? alpha / 2 : alpha;
                ctx.fillText(`Î± = ${(area * 100).toFixed(1)}%`, mapX(3.5), mapY(0.1));
            }

            // ì¤‘ì•™ê°’
            ctx.fillStyle = '#64748b';
            ctx.fillText('0', mapX(0), mapY(0) + 20);
        }


        // --- ì¸í„°ë™ì…˜ ë¡œì§ ---
        function setMode(mode) {
            currentMode = mode;

            // ë²„íŠ¼ ìŠ¤íƒ€ì¼ ì—…ë°ì´íŠ¸
            document.querySelectorAll('.nav-btn').forEach(btn => btn.classList.remove('active'));
            event.target.classList.add('active');

            updateText();
            draw();
        }

        function updateText() {
            const hypoText = document.getElementById('hypothesis-text');
            const scTitle = document.getElementById('scenario-title');
            const scDesc = document.getElementById('scenario-desc');
            const instNote = document.getElementById('instructor-note');

            if (currentMode === 'two') {
                hypoText.innerHTML = "Hâ‚€: Î¼ = Î¼â‚€  vs  Hâ‚: Î¼ â‰  Î¼â‚€";
                scDesc.innerHTML = `<strong>ğŸ€ ì‹œë‚˜ë¦¬ì˜¤:</strong> "ë†êµ¬ì„ ìˆ˜ í‰ê·  í‚¤ê°€ ì¼ë°˜ì¸(175cm)ê³¼ <strong>ë‹¤ë¥¸ê°€?</strong>"<br>í¬ë“  ì‘ë“  ë‹¤ë¥´ê¸°ë§Œ í•˜ë©´ ê´€ì‹¬ì´ ìˆìŠµë‹ˆë‹¤.`;
                instNote.innerHTML = `<strong>ê¸°ê°ì—­ì´ ì–‘ìª½ìœ¼ë¡œ ë¶„ì‚°ë¨!</strong><br>Î±=0.05ì¼ ë•Œ, ì–‘ìª½ ë 2.5%ì”© ë‚˜ë‰©ë‹ˆë‹¤. ì„ê³„ê°’ì€ ì•½ Â±1.96ì…ë‹ˆë‹¤.<br>ì–‘ìª½ ë°©í–¥ ëª¨ë‘ë¥¼ ê°ì‹œí•˜ì§€ë§Œ, í•œìª½ë§Œ ë³¼ ë•Œë³´ë‹¤ëŠ” ê¸°ì¤€ì´ ë” ê¹ê¹í•©ë‹ˆë‹¤.`;
            } else if (currentMode === 'right') {
                hypoText.innerHTML = "Hâ‚€: Î¼ â‰¤ Î¼â‚€  vs  Hâ‚: Î¼ > Î¼â‚€";
                scDesc.innerHTML = `<strong>ğŸ€ ì‹œë‚˜ë¦¬ì˜¤:</strong> "ë†êµ¬ì„ ìˆ˜ í‰ê·  í‚¤ê°€ ì¼ë°˜ì¸ë³´ë‹¤ <strong>í°ê°€?</strong>"<br>ì‘ì€ ê²½ìš°ëŠ” ê´€ì‹¬ ì—†ê³ , ì˜¤ì§ 'ë” í°ì§€'ë§Œ í™•ì¸í•©ë‹ˆë‹¤.`;
                instNote.innerHTML = `<strong>ê¸°ê°ì—­ì´ ì˜¤ë¥¸ìª½(í° ìª½)ì— ì§‘ì¤‘ë¨!</strong><br>Î±=0.05ê°€ ì˜¤ë¥¸ìª½ì— ì „ë¶€ ëª¨ì…ë‹ˆë‹¤. ì„ê³„ê°’ì€ ì•½ +1.645ì…ë‹ˆë‹¤.<br>ì–‘ì¸¡ê²€ì •(1.96)ë³´ë‹¤ ê¸°ì¤€ì´ ë‚®ì•„ì ¸ì„œ, <strong>'í¬ë‹¤'ëŠ” ê²ƒì„ ë” ì‰½ê²Œ(ë¯¼ê°í•˜ê²Œ) ë°œê²¬</strong>í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.`;
            } else {
                hypoText.innerHTML = "Hâ‚€: p â‰¥ 0.5  vs  Hâ‚: p < 0.5";
                scDesc.innerHTML = `<strong>ğŸª™ ì‹œë‚˜ë¦¬ì˜¤:</strong> "ì´ ë™ì „ì€ ë’·ë©´ì´ ë” ì˜ ë‚˜ì˜¤ë‚˜? (ì•ë©´ í™•ë¥ ì´ 0.5ë³´ë‹¤ <strong>ì‘ì€ê°€?</strong>)"<br>ì•ë©´ì´ ë§ì´ ë‚˜ì˜¤ëŠ” ê²½ìš°ëŠ” ë¬´ì‹œí•˜ê³ , ì ê²Œ ë‚˜ì˜¤ëŠ” ê²½ìš°ë§Œ ë”°ì§‘ë‹ˆë‹¤.`;
                instNote.innerHTML = `<strong>ê¸°ê°ì—­ì´ ì™¼ìª½(ì‘ì€ ìª½)ì— ì§‘ì¤‘ë¨!</strong><br>Î±=0.05ê°€ ì™¼ìª½ì— ì „ë¶€ ëª¨ì…ë‹ˆë‹¤. ì„ê³„ê°’ì€ ì•½ -1.645ì…ë‹ˆë‹¤.<br>íŠ¹ì • ë°©í–¥(ì‘ë‹¤)ì— ëŒ€í•´ì„œëŠ” ê²€ì •ë ¥ì´ ë†’ì•„ì§€ì§€ë§Œ, ë°˜ëŒ€ ë°©í–¥ì˜ ë³€í™”ëŠ” ì•„ì˜ˆ ê°ì§€í•˜ì§€ ëª»í•©ë‹ˆë‹¤.`;
            }
        }

        slider.addEventListener('input', (e) => {
            alpha = parseFloat(e.target.value);
            alphaDisplay.textContent = alpha.toFixed(2);
            draw();
            updateText(); // í…ìŠ¤íŠ¸ ë‚´ì˜ ìˆ˜ì¹˜ ë“±ì€ ê³ ì •ì´ì§€ë§Œ ë¦¬í”„ë ˆì‹œ ì°¨ì›
        });

        // ì´ˆê¸°í™”
        window.addEventListener('resize', draw);
        draw();

    </script>

</body>

</html>