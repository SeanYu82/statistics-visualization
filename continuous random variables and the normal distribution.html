<!DOCTYPE html>
<html lang="ko">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ì—°ì†í˜• í™•ë¥ ë³€ìˆ˜ì™€ ì •ê·œë¶„í¬</title>
    <style>
        :root {
            --primary: #3b82f6;
            --secondary: #10b981;
            --bg: #f8fafc;
            --text: #1e293b;
            --card-bg: #ffffff;
        }

        body {
            font-family: 'Pretendard', -apple-system, BlinkMacSystemFont, system-ui, Roboto, sans-serif;
            line-height: 1.6;
            background-color: var(--bg);
            color: var(--text);
            margin: 0;
            padding: 20px;
        }

        .container {
            max-width: 800px;
            margin: 0 auto;
        }

        h1 {
            text-align: center;
            color: var(--text);
            margin-bottom: 40px;
        }

        h2 {
            font-size: 1.5rem;
            border-bottom: 2px solid var(--primary);
            padding-bottom: 10px;
            margin-top: 0;
        }

        .card {
            background: var(--card-bg);
            border-radius: 12px;
            padding: 24px;
            margin-bottom: 30px;
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1);
        }

        canvas {
            width: 100%;
            height: 300px;
            background: #f1f5f9;
            border-radius: 8px;
            margin: 20px 0;
        }

        .controls {
            display: flex;
            gap: 20px;
            background: #f1f5f9;
            padding: 15px;
            border-radius: 8px;
            flex-wrap: wrap;
        }

        .control-group {
            flex: 1;
            display: flex;
            flex-direction: column;
        }

        label {
            font-weight: bold;
            font-size: 0.9rem;
            margin-bottom: 5px;
        }

        input[type=range] {
            width: 100%;
            cursor: pointer;
        }

        .desc {
            font-size: 0.95rem;
            color: #475569;
            margin-bottom: 15px;
        }

        .highlight {
            color: var(--primary);
            font-weight: bold;
        }

        button {
            background: var(--primary);
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 6px;
            cursor: pointer;
            font-weight: bold;
            transition: background 0.2s;
        }

        button:hover {
            background: #2563eb;
        }
    </style>
</head>

<body>

    <div class="container">
        <h1>ğŸ“Š ì›€ì§ì´ëŠ” ì •ê·œë¶„í¬ì™€ í™•ë¥ ë³€ìˆ˜</h1>

        <section class="card">
            <h2>1. ì´ì‚°í˜•ì—ì„œ ì—°ì†í˜•ìœ¼ë¡œì˜ ì§„í™”</h2>
            <p class="desc">
                ì£¼ì‚¬ìœ„ ëˆˆê¸ˆ ê°™ì€ <strong>ì´ì‚°í˜• í™•ë¥ ë³€ìˆ˜</strong>ì˜ ê°„ê²©ì´ ì ì  ì¢ì•„ì§€ë©´, ê²°êµ­ ë§¤ë„ëŸ¬ìš´ <strong>ì—°ì†í˜• í™•ë¥ ë³€ìˆ˜(ì •ê·œë¶„í¬ ê³¡ì„ )</strong>ê°€ ë©ë‹ˆë‹¤.
            </p>
            <canvas id="canvas1"></canvas>
            <div style="text-align: center;">
                <button onclick="restartEvolution()">ì• ë‹ˆë©”ì´ì…˜ ë‹¤ì‹œë³´ê¸°</button>
            </div>
        </section>

        <section class="card">
            <h2>2. ì •ê·œë¶„í¬ì˜ ëª¨ì–‘ ê²°ì • (í‰ê· ê³¼ ë¶„ì‚°)</h2>
            <p class="desc">
                ì •ê·œë¶„í¬ëŠ” <span class="highlight">í‰ê· (Î¼)</span>ê³¼ <span class="highlight">í‘œì¤€í¸ì°¨(Ïƒ)</span>ë§Œìœ¼ë¡œ ê²°ì •ë©ë‹ˆë‹¤. ì•„ë˜ ìŠ¬ë¼ì´ë”ë¥¼
                ì›€ì§ì—¬ ë³´ì„¸ìš”.
            </p>
            <canvas id="canvas2"></canvas>
            <div class="controls">
                <div class="control-group">
                    <label>í‰ê·  (Î¼): <span id="val-mu">0</span></label>
                    <input type="range" id="range-mu" min="-3" max="3" step="0.1" value="0">
                </div>
                <div class="control-group">
                    <label>í‘œì¤€í¸ì°¨ (Ïƒ): <span id="val-sigma">1.0</span></label>
                    <input type="range" id="range-sigma" min="0.5" max="2.0" step="0.1" value="1.0">
                </div>
            </div>
        </section>

        <section class="card">
            <h2>3. í™•ë¥  ê³„ì‚°: ì„ ì´ ì•„ë‹Œ ë©´ì </h2>
            <p class="desc">
                íŠ¹ì • ê°’ í•˜ë‚˜(ì„ )ì˜ í™•ë¥ ì€ 0ì…ë‹ˆë‹¤. í™•ë¥ ì€ <strong>ë©´ì (ì ë¶„ê°’)</strong>ìœ¼ë¡œ ê³„ì‚°í•©ë‹ˆë‹¤. êµ¬ê°„ì„ ì¡°ì ˆí•˜ì—¬ í™•ë¥ (íŒŒë€ìƒ‰ ì˜ì—­)ì„ í™•ì¸í•˜ì„¸ìš”.
            </p>
            <canvas id="canvas3"></canvas>
            <div class="controls">
                <div class="control-group">
                    <label>ì‹œì‘ì  (a): <span id="val-a">-1.0</span></label>
                    <input type="range" id="range-a" min="-3" max="3" step="0.1" value="-1.0">
                </div>
                <div class="control-group">
                    <label>ëì  (b): <span id="val-b">1.0</span></label>
                    <input type="range" id="range-b" min="-3" max="3" step="0.1" value="1.0">
                </div>
            </div>
            <p style="text-align: center; font-weight: bold;">
                í™•ë¥  P(a â‰¤ X â‰¤ b) â‰ˆ <span id="prob-result" class="highlight">0.0%</span>
            </p>
        </section>

        <section class="card">
            <h2>4. ì¤‘ì‹¬ê·¹í•œì •ë¦¬ ì‹œë®¬ë ˆì´ì…˜</h2>
            <p class="desc">
                ë¬´ì‘ìœ„ ë°ì´í„°ë¥¼ ê³„ì† ë½‘ì•„ì„œ í‰ê· ì„ ë‚´ë©´, ë°ì´í„°ì˜ ì›ë˜ ëª¨ì–‘ê³¼ ìƒê´€ì—†ì´ <strong>ì •ê·œë¶„í¬ ëª¨ì–‘</strong>ìœ¼ë¡œ ìŒ“ì´ê²Œ ë©ë‹ˆë‹¤.
            </p>
            <canvas id="canvas4"></canvas>
            <div style="text-align: center;">
                <button id="btn-clt" onclick="toggleCLT()">ë°ì´í„° ìˆ˜ì§‘ ì‹œì‘</button>
                <button onclick="resetCLT()" style="background: #64748b; margin-left: 10px;">ë¦¬ì…‹</button>
            </div>
        </section>
    </div>

    <script>
        // --- ê³µí†µ í•¨ìˆ˜: ì •ê·œë¶„í¬ ê³µì‹ (Gaussian Function) ---
        function gaussian(x, mu, sigma) {
            return (1 / (sigma * Math.sqrt(2 * Math.PI))) * Math.exp(-0.5 * Math.pow((x - mu) / sigma, 2));
        }

        // --- Canvas 1: Evolution Animation ---
        const cvs1 = document.getElementById('canvas1');
        const ctx1 = cvs1.getContext('2d');
        let evolFrame = 0;
        let evolReq;

        function drawEvolution() {
            cvs1.width = cvs1.offsetWidth;
            cvs1.height = cvs1.offsetHeight;
            const w = cvs1.width;
            const h = cvs1.height;

            // ì• ë‹ˆë©”ì´ì…˜ ì§„í–‰ë„ (0 ~ 1)
            let progress = (evolFrame % 300) / 300;
            // ë§‰ëŒ€ ê°œìˆ˜: 5ê°œì—ì„œ 100ê°œë¡œ ì¦ê°€
            let bars = 5 + Math.floor(progress * 95);

            ctx1.clearRect(0, 0, w, h);

            // ì¢Œí‘œ ë³€í™˜
            const mapX = (val) => (val + 3) / 6 * w;
            const mapY = (val) => h - (val * h * 0.8) - 20;

            // ë§‰ëŒ€ ê·¸ë¦¬ê¸°
            const barWidth = w / bars;
            ctx1.fillStyle = '#93c5fd';
            ctx1.strokeStyle = 'white';

            for (let i = 0; i < bars; i++) {
                let xVal = -3 + (i / bars) * 6;
                let yVal = gaussian(xVal, 0, 1);

                let px = mapX(xVal);
                let py = mapY(yVal);
                let pHeight = h - py - 20;

                ctx1.fillRect(px, py, barWidth + 1, pHeight);
                ctx1.strokeRect(px, py, barWidth + 1, pHeight);
            }

            // ëª©í‘œ ê³¡ì„  (ë°˜íˆ¬ëª…)
            ctx1.beginPath();
            ctx1.strokeStyle = '#2563eb';
            ctx1.lineWidth = 3;
            for (let x = 0; x <= w; x += 5) {
                let logicX = (x / w) * 6 - 3;
                let logicY = gaussian(logicX, 0, 1);
                if (x === 0) ctx1.moveTo(x, mapY(logicY));
                else ctx1.lineTo(x, mapY(logicY));
            }
            ctx1.stroke();

            // í…ìŠ¤íŠ¸
            ctx1.fillStyle = '#1e293b';
            ctx1.font = '16px sans-serif';
            ctx1.fillText(`ë§‰ëŒ€ ê°œìˆ˜: ${bars}`, 20, 30);
            if (bars > 90) ctx1.fillText("ê±°ì˜ ì™„ë²½í•œ ê³¡ì„ ì…ë‹ˆë‹¤!", 20, 55);

            evolFrame++;
            evolReq = requestAnimationFrame(drawEvolution);
        }

        function restartEvolution() {
            evolFrame = 0;
        }
        drawEvolution();


        // --- Canvas 2: Interactive Mean & Sigma ---
        const cvs2 = document.getElementById('canvas2');
        const ctx2 = cvs2.getContext('2d');
        const rMu = document.getElementById('range-mu');
        const rSigma = document.getElementById('range-sigma');
        const vMu = document.getElementById('val-mu');
        const vSigma = document.getElementById('val-sigma');

        function drawInteractive() {
            cvs2.width = cvs2.offsetWidth;
            cvs2.height = cvs2.offsetHeight;
            const w = cvs2.width;
            const h = cvs2.height;
            const mu = parseFloat(rMu.value);
            const sigma = parseFloat(rSigma.value);

            vMu.textContent = mu.toFixed(1);
            vSigma.textContent = sigma.toFixed(1);

            ctx2.clearRect(0, 0, w, h);

            // ì¢Œí‘œ ë³€í™˜ (Xì¶•: -5 ~ 5)
            const mapX = (val) => (val + 5) / 10 * w;
            const mapY = (val) => h - (val * h * 0.8) - 20;

            // ê¸°ì¤€ì„  (Xì¶•)
            ctx2.beginPath();
            ctx2.moveTo(0, h - 20);
            ctx2.lineTo(w, h - 20);
            ctx2.strokeStyle = '#ccc';
            ctx2.stroke();

            // ì¤‘ì‹¬ì„  (í‰ê· )
            let centerX = mapX(mu);
            ctx2.beginPath();
            ctx2.setLineDash([5, 5]);
            ctx2.moveTo(centerX, 20);
            ctx2.lineTo(centerX, h - 20);
            ctx2.strokeStyle = '#94a3b8';
            ctx2.stroke();
            ctx2.setLineDash([]);

            // ì •ê·œë¶„í¬ ê³¡ì„  ê·¸ë¦¬ê¸°
            ctx2.beginPath();
            ctx2.strokeStyle = '#dc2626';
            ctx2.lineWidth = 3;
            for (let px = 0; px <= w; px++) {
                let logicX = (px / w) * 10 - 5;
                let logicY = gaussian(logicX, mu, sigma);
                if (px === 0) ctx2.moveTo(px, mapY(logicY));
                else ctx2.lineTo(px, mapY(logicY));
            }
            ctx2.stroke();
        }

        rMu.addEventListener('input', drawInteractive);
        rSigma.addEventListener('input', drawInteractive);
        // ì´ˆê¸° ì‹¤í–‰
        setTimeout(drawInteractive, 100);


        // --- Canvas 3: Area & Probability ---
        const cvs3 = document.getElementById('canvas3');
        const ctx3 = cvs3.getContext('2d');
        const rA = document.getElementById('range-a');
        const rB = document.getElementById('range-b');
        const vA = document.getElementById('val-a');
        const vB = document.getElementById('val-b');
        const resProb = document.getElementById('prob-result');

        // ì˜¤ì°¨í•¨ìˆ˜ ê·¼ì‚¬ì‹ì„ ì´ìš©í•œ ëˆ„ì ë¶„í¬í•¨ìˆ˜(CDF) ê³„ì‚°
        function cdf(x) {
            const t = 1 / (1 + 0.2316419 * Math.abs(x));
            const d = 0.3989423 * Math.exp(-x * x / 2);
            let prob = d * t * (0.3193815 + t * (-0.3565638 + t * (1.781478 + t * (-1.821256 + t * 1.330274))));
            if (x > 0) prob = 1 - prob;
            return prob;
        }

        function drawArea() {
            cvs3.width = cvs3.offsetWidth;
            cvs3.height = cvs3.offsetHeight;
            const w = cvs3.width;
            const h = cvs3.height;

            let a = parseFloat(rA.value);
            let b = parseFloat(rB.value);
            if (a > b) { // aê°€ bë³´ë‹¤ í¬ë©´ ìŠ¤ì™‘
                [a, b] = [b, a];
            }

            vA.textContent = a.toFixed(1);
            vB.textContent = b.toFixed(1);

            // í™•ë¥  ê³„ì‚° (í‘œì¤€ì •ê·œë¶„í¬ ê¸°ì¤€ N(0,1))
            let probability = cdf(b) - cdf(a);
            resProb.textContent = (probability * 100).toFixed(2) + "%";

            ctx3.clearRect(0, 0, w, h);
            const mapX = (val) => (val + 4) / 8 * w; // -4 ~ 4 ë²”ìœ„
            const mapY = (val) => h - (val * h * 0.8) - 20;

            // 1. ì „ì²´ ê³¡ì„  ê·¸ë¦¬ê¸°
            ctx3.beginPath();
            ctx3.strokeStyle = '#333';
            ctx3.lineWidth = 2;
            for (let px = 0; px <= w; px++) {
                let logicX = (px / w) * 8 - 4;
                let logicY = gaussian(logicX, 0, 1);
                if (px === 0) ctx3.moveTo(px, mapY(logicY));
                else ctx3.lineTo(px, mapY(logicY));
            }
            ctx3.stroke();

            // 2. ì˜ì—­ ì±„ìš°ê¸°
            ctx3.beginPath();
            ctx3.fillStyle = 'rgba(59, 130, 246, 0.5)'; // ë°˜íˆ¬ëª… íŒŒë‘

            // a ì§€ì  ì‹œì‘
            let startPx = mapX(a);
            ctx3.moveTo(startPx, h - 20);

            // ê³¡ì„  ë”°ë¼ê°€ê¸°
            for (let px = startPx; px <= mapX(b); px++) {
                let logicX = (px / w) * 8 - 4;
                let logicY = gaussian(logicX, 0, 1);
                ctx3.lineTo(px, mapY(logicY));
            }

            // b ì§€ì ì—ì„œ ë°”ë‹¥ìœ¼ë¡œ
            ctx3.lineTo(mapX(b), h - 20);
            ctx3.closePath();
            ctx3.fill();

            // 3. ì¶• ê·¸ë¦¬ê¸°
            ctx3.beginPath();
            ctx3.moveTo(0, h - 20);
            ctx3.lineTo(w, h - 20);
            ctx3.stroke();
        }

        rA.addEventListener('input', drawArea);
        rB.addEventListener('input', drawArea);
        setTimeout(drawArea, 100);


        // --- Canvas 4: CLT Simulation ---
        const cvs4 = document.getElementById('canvas4');
        const ctx4 = cvs4.getContext('2d');
        let cltData = new Array(50).fill(0); // -5 ~ 5 êµ¬ê°„ì„ 50ê°œë¡œ ë‚˜ëˆˆ íˆìŠ¤í† ê·¸ë¨
        let cltTimer;
        let isRunning = false;
        let sampleCount = 0;

        function drawCLT() {
            cvs4.width = cvs4.offsetWidth;
            cvs4.height = cvs4.offsetHeight;
            const w = cvs4.width;
            const h = cvs4.height;

            ctx4.clearRect(0, 0, w, h);

            const barW = w / cltData.length;
            const maxVal = Math.max(...cltData, 1); // 0ë‚˜ëˆ„ê¸° ë°©ì§€

            // ë§‰ëŒ€ ê·¸ë¦¬ê¸°
            ctx4.fillStyle = '#10b981';
            for (let i = 0; i < cltData.length; i++) {
                let barH = (cltData[i] / maxVal) * (h * 0.8);
                ctx4.fillRect(i * barW, h - barH - 20, barW - 1, barH);
            }

            // í…ìŠ¤íŠ¸
            ctx4.fillStyle = '#333';
            ctx4.font = "14px sans-serif";
            ctx4.fillText(`ëˆ„ì  í‘œë³¸ í‰ê·  ìˆ˜: ${sampleCount}`, 10, 30);

            // ê¸°ì¤€ì„ 
            ctx4.beginPath();
            ctx4.moveTo(0, h - 20);
            ctx4.lineTo(w, h - 20);
            ctx4.stroke();
        }

        function updateCLT() {
            // ì‹œë®¬ë ˆì´ì…˜: ëœë¤ê°’(ê· ë“±ë¶„í¬ ë“±) 5ê°œë¥¼ ë½‘ì•„ í‰ê· ì„ ëƒ„
            // ì´ê²ƒì„ ë°˜ë³µí•˜ë©´ ì •ê·œë¶„í¬ê°€ ë¨
            for (let speed = 0; speed < 10; speed++) { // ì†ë„ ì¡°ì ˆ
                let sum = 0;
                let n = 5;
                for (let i = 0; i < n; i++) {
                    sum += Math.random() * 10 - 5; // -5 ~ 5 ì‚¬ì´ ëœë¤
                }
                let mean = sum / n;

                // íˆìŠ¤í† ê·¸ë¨ ì¸ë±ìŠ¤ë¡œ ë³€í™˜ (-5~5 -> 0~49)
                let idx = Math.floor((mean + 5) / 10 * 50);
                if (idx >= 0 && idx < 50) cltData[idx]++;
                sampleCount++;
            }
            drawCLT();

            if (isRunning) requestAnimationFrame(updateCLT);
        }

        function toggleCLT() {
            const btn = document.getElementById('btn-clt');
            if (!isRunning) {
                isRunning = true;
                btn.textContent = "ì¼ì‹œì •ì§€";
                btn.style.background = "#f59e0b";
                updateCLT();
            } else {
                isRunning = false;
                btn.textContent = "ë°ì´í„° ìˆ˜ì§‘ ê³„ì†";
                btn.style.background = "#3b82f6";
            }
        }

        function resetCLT() {
            isRunning = false;
            document.getElementById('btn-clt').textContent = "ë°ì´í„° ìˆ˜ì§‘ ì‹œì‘";
            document.getElementById('btn-clt').style.background = "#3b82f6";
            cltData.fill(0);
            sampleCount = 0;
            drawCLT();
        }
        drawCLT();

        // ì°½ í¬ê¸° ì¡°ì ˆ ì‹œ ë¦¬ë“œë¡œìš°
        window.addEventListener('resize', () => {
            drawInteractive();
            drawArea();
            drawCLT();
        });

    </script>

</body>

</html>